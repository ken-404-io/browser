<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="Content-Security-Policy" content="default-src 'self'; style-src 'self' 'unsafe-inline'; script-src 'self';">
  <title>Browser</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <!-- Chrome-style: tabs + window controls in one top bar -->
  <div id="tab-strip">
    <div id="tab-strip-drag"></div>
    <div id="tabs-container"></div>
    <button id="btn-new-tab" title="New Tab (Ctrl+T)">
      <svg width="16" height="16" viewBox="0 0 16 16"><path d="M8 3v10M3 8h10" stroke="currentColor" stroke-width="1.8" stroke-linecap="round"/></svg>
    </button>
    <div id="tab-strip-spacer"></div>
    <div id="window-controls">
      <button id="btn-minimize" class="window-btn" title="Minimize">
        <svg width="10" height="1" viewBox="0 0 10 1"><rect width="10" height="1" fill="currentColor"/></svg>
      </button>
      <button id="btn-maximize" class="window-btn" title="Maximize">
        <svg width="10" height="10" viewBox="0 0 10 10"><rect x="0.5" y="0.5" width="9" height="9" stroke="currentColor" stroke-width="1" fill="none"/></svg>
      </button>
      <button id="btn-close" class="window-btn window-btn-close" title="Close">
        <svg width="10" height="10" viewBox="0 0 10 10"><path d="M1 1l8 8M9 1l-8 8" stroke="currentColor" stroke-width="1.2"/></svg>
      </button>
    </div>
  </div>

  <!-- Chrome-style toolbar -->
  <div id="toolbar">
    <button id="btn-back" class="toolbar-btn" title="Back (Alt+Left)" disabled>
      <svg width="20" height="20" viewBox="0 0 20 20"><path d="M13 4L7 10l6 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" fill="none"/></svg>
    </button>
    <button id="btn-forward" class="toolbar-btn" title="Forward (Alt+Right)" disabled>
      <svg width="20" height="20" viewBox="0 0 20 20"><path d="M7 4l6 6-6 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" fill="none"/></svg>
    </button>
    <button id="btn-reload" class="toolbar-btn" title="Reload (Ctrl+R)">
      <svg width="20" height="20" viewBox="0 0 20 20"><path d="M16 10a6 6 0 1 1-1.5-4" stroke="currentColor" stroke-width="2" stroke-linecap="round" fill="none"/><path d="M15 2v4.5h-4.5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" fill="none"/></svg>
    </button>

    <!-- Chrome-style omnibox -->
    <div id="omnibox">
      <div id="omnibox-icon">
        <svg id="icon-search" width="16" height="16" viewBox="0 0 16 16"><circle cx="7" cy="7" r="4.5" stroke="currentColor" stroke-width="1.5" fill="none"/><path d="M10.5 10.5L14 14" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/></svg>
        <svg id="icon-lock" width="16" height="16" viewBox="0 0 16 16" style="display:none"><rect x="3" y="7" width="10" height="7" rx="1.5" stroke="currentColor" stroke-width="1.3" fill="none"/><path d="M5.5 7V5a2.5 2.5 0 0 1 5 0v2" stroke="currentColor" stroke-width="1.3" stroke-linecap="round" fill="none"/></svg>
      </div>
      <input id="url-bar" type="text" placeholder="Search or type a URL" spellcheck="false" autocomplete="off">
      <button id="btn-bookmark" class="omnibox-btn" title="Bookmark this page (Ctrl+D)">
        <svg width="16" height="16" viewBox="0 0 16 16"><path d="M8 2l2 4 4.5.7-3.3 3.1.8 4.5L8 12.1 3.9 14.3l.8-4.5L1.5 6.7 6 6l2-4z" stroke="currentColor" stroke-width="1.2" stroke-linejoin="round" fill="none" class="star-path"/></svg>
      </button>
    </div>

    <button id="btn-downloads" class="toolbar-btn" title="Downloads (Ctrl+J)">
      <svg width="20" height="20" viewBox="0 0 20 20"><path d="M10 3v9M7 9l3 3 3-3" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" fill="none"/><path d="M4 14v2h12v-2" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" fill="none"/></svg>
    </button>
    <button id="btn-history" class="toolbar-btn" title="History (Ctrl+H)">
      <svg width="20" height="20" viewBox="0 0 20 20"><circle cx="10" cy="10" r="7" stroke="currentColor" stroke-width="1.5" fill="none"/><path d="M10 5.5V10l3.5 2" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" fill="none"/></svg>
    </button>

    <!-- Chrome-style profile + menu -->
    <div id="toolbar-separator"></div>

    <!-- Profile button -->
    <button id="btn-profile" class="toolbar-btn" title="Profile">
      <svg width="20" height="20" viewBox="0 0 20 20"><circle cx="10" cy="7" r="3.5" stroke="currentColor" stroke-width="1.5" fill="none"/><path d="M3.5 17.5c0-3.6 2.9-6.5 6.5-6.5s6.5 2.9 6.5 6.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" fill="none"/></svg>
    </button>

    <button id="btn-settings" class="toolbar-btn" title="Settings">
      <svg width="20" height="20" viewBox="0 0 20 20"><circle cx="10" cy="10" r="2.5" stroke="currentColor" stroke-width="1.5" fill="none"/><path d="M10 2v2.5M10 15.5V18M2 10h2.5M15.5 10H18M4.2 4.2l1.8 1.8M14 14l1.8 1.8M4.2 15.8l1.8-1.8M14 6l1.8-1.8" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/></svg>
    </button>
    <button id="btn-menu" class="toolbar-btn" title="More">
      <svg width="20" height="20" viewBox="0 0 20 20"><circle cx="10" cy="4" r="1.5" fill="currentColor"/><circle cx="10" cy="10" r="1.5" fill="currentColor"/><circle cx="10" cy="16" r="1.5" fill="currentColor"/></svg>
    </button>
  </div>

  <!-- Bookmarks bar -->
  <div id="bookmarks-bar"></div>

  <!-- Find bar (Chrome positions it top-right) -->
  <div id="find-bar">
    <input id="find-input" type="text" placeholder="Find" spellcheck="false" autocomplete="off">
    <span id="find-matches"></span>
    <button id="find-prev" class="find-btn" title="Previous (Shift+Enter)">
      <svg width="14" height="14" viewBox="0 0 14 14"><path d="M10 9L7 6 4 9" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" fill="none"/></svg>
    </button>
    <button id="find-next" class="find-btn" title="Next (Enter)">
      <svg width="14" height="14" viewBox="0 0 14 14"><path d="M4 5l3 3 3-3" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" fill="none"/></svg>
    </button>
    <button id="find-close" class="find-btn" title="Close (Esc)">
      <svg width="14" height="14" viewBox="0 0 14 14"><path d="M3 3l8 8M11 3l-8 8" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/></svg>
    </button>
  </div>

  <!-- Webview container -->
  <div id="webview-container"></div>

  <!-- New tab page (Chrome-style) -->
  <div id="new-tab-page">
    <div id="ntp-content">
      <div id="ntp-logo-wrap">
        <svg id="ntp-logo" width="120" height="40" viewBox="0 0 120 40">
          <text x="60" y="30" text-anchor="middle" fill="url(#logo-grad)" font-size="28" font-weight="600" font-family="'Segoe UI',system-ui,sans-serif">Browser</text>
          <defs><linearGradient id="logo-grad" x1="0" y1="0" x2="1" y2="0"><stop offset="0%" stop-color="#8ab4f8"/><stop offset="50%" stop-color="#c58af9"/><stop offset="100%" stop-color="#8ab4f8"/></linearGradient></defs>
        </svg>
      </div>
      <div id="ntp-search">
        <svg width="20" height="20" viewBox="0 0 20 20" class="ntp-search-icon"><circle cx="8.5" cy="8.5" r="5.5" stroke="currentColor" stroke-width="1.8" fill="none"/><path d="M13 13l4 4" stroke="currentColor" stroke-width="1.8" stroke-linecap="round"/></svg>
        <input id="ntp-search-input" type="text" placeholder="Search or type a URL" spellcheck="false" autocomplete="off">
      </div>
      <div id="ntp-shortcuts">
        <a class="shortcut" data-url="https://github.com">
          <div class="shortcut-icon" style="background:#24292e;color:#fff">GH</div>
          <span>GitHub</span>
        </a>
        <a class="shortcut" data-url="https://youtube.com">
          <div class="shortcut-icon" style="background:#ff0000;color:#fff">YT</div>
          <span>YouTube</span>
        </a>
        <a class="shortcut" data-url="https://reddit.com">
          <div class="shortcut-icon" style="background:#ff4500;color:#fff">RD</div>
          <span>Reddit</span>
        </a>
        <a class="shortcut" data-url="https://news.ycombinator.com">
          <div class="shortcut-icon" style="background:#ff6600;color:#fff">HN</div>
          <span>Hacker News</span>
        </a>
        <a class="shortcut" data-url="https://stackoverflow.com">
          <div class="shortcut-icon" style="background:#f48024;color:#fff">SO</div>
          <span>Stack Overflow</span>
        </a>
        <a class="shortcut" data-url="https://wikipedia.org">
          <div class="shortcut-icon" style="background:#636363;color:#fff">W</div>
          <span>Wikipedia</span>
        </a>
        <a class="shortcut" data-url="https://twitter.com">
          <div class="shortcut-icon" style="background:#1da1f2;color:#fff">X</div>
          <span>X / Twitter</span>
        </a>
        <a class="shortcut" data-url="https://gmail.com">
          <div class="shortcut-icon" style="background:#ea4335;color:#fff">GM</div>
          <span>Gmail</span>
        </a>
      </div>
    </div>

    <!-- SERP Results (shown when search is active) -->
    <div id="serp-container">
      <div id="serp-header">
        <span id="serp-query"></span>
        <div id="serp-tabs">
          <button class="serp-tab active" data-serp-tab="all">All</button>
          <button class="serp-tab" data-serp-tab="related">Related</button>
        </div>
      </div>
      <div id="serp-results"></div>
      <div id="serp-footer">
        <button id="serp-view-full">View full results on search engine</button>
      </div>
    </div>
  </div>

  <!-- Downloads panel -->
  <div id="downloads-panel" class="side-panel">
    <div class="panel-header">
      <h3>Downloads</h3>
      <div class="panel-header-actions">
        <button id="downloads-clear" class="panel-action-btn">Clear all</button>
        <button id="downloads-panel-close" class="panel-close-btn">
          <svg width="14" height="14" viewBox="0 0 14 14"><path d="M3 3l8 8M11 3l-8 8" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/></svg>
        </button>
      </div>
    </div>
    <div id="downloads-list" class="panel-list"></div>
  </div>

  <!-- History panel -->
  <div id="history-panel" class="side-panel">
    <div class="panel-header">
      <h3>History</h3>
      <div class="panel-header-actions">
        <button id="history-clear" class="panel-action-btn">Clear all</button>
        <button id="history-panel-close" class="panel-close-btn">
          <svg width="14" height="14" viewBox="0 0 14 14"><path d="M3 3l8 8M11 3l-8 8" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/></svg>
        </button>
      </div>
    </div>
    <input id="history-search" type="text" placeholder="Search history..." class="panel-search" spellcheck="false">
    <div id="history-list" class="panel-list"></div>
  </div>

  <!-- Settings panel -->
  <div id="settings-panel" class="side-panel">
    <div class="panel-header">
      <h3>Settings</h3>
      <button id="settings-panel-close" class="panel-close-btn">
        <svg width="14" height="14" viewBox="0 0 14 14"><path d="M3 3l8 8M11 3l-8 8" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/></svg>
      </button>
    </div>
    <div class="settings-content">
      <div class="settings-group">
        <label class="settings-label">Search Engine</label>
        <select id="setting-search-engine" class="settings-select">
          <option value="duckduckgo">DuckDuckGo</option>
          <option value="bing">Bing</option>
        </select>
      </div>
      <div class="settings-group">
        <label class="settings-label"><input type="checkbox" id="setting-adblock" class="settings-checkbox"> Ad Blocker</label>
      </div>
      <div class="settings-group">
        <label class="settings-label"><input type="checkbox" id="setting-restore-session" class="settings-checkbox"> Restore previous session on startup</label>
      </div>
    </div>
  </div>

  <!-- Profile panel -->
  <div id="profile-panel" class="side-panel">
    <div class="panel-header">
      <h3>Profiles</h3>
      <button id="profile-panel-close" class="panel-close-btn">
        <svg width="14" height="14" viewBox="0 0 14 14"><path d="M3 3l8 8M11 3l-8 8" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/></svg>
      </button>
    </div>
    <div id="profile-content">
      <!-- Auth status -->
      <div id="auth-status">
        <div id="auth-logged-out">
          <p class="auth-message">Sign in to sync your data across devices</p>
          <button id="auth-show-login" class="auth-btn auth-btn-primary">Sign In</button>
          <button id="auth-show-register" class="auth-btn">Create Account</button>
        </div>
        <div id="auth-logged-in" style="display:none">
          <div id="auth-user-info">
            <svg width="32" height="32" viewBox="0 0 32 32"><circle cx="16" cy="11" r="5.5" stroke="currentColor" stroke-width="1.5" fill="none"/><path d="M5.5 28c0-5.8 4.7-10.5 10.5-10.5S26.5 22.2 26.5 28" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" fill="none"/></svg>
            <span id="auth-email-display"></span>
          </div>
          <button id="auth-logout-btn" class="auth-btn">Sign Out</button>
        </div>
      </div>

      <!-- Auth forms -->
      <div id="auth-form-container" style="display:none">
        <h4 id="auth-form-title">Sign In</h4>
        <div id="auth-error" class="auth-error"></div>
        <input id="auth-email" type="email" placeholder="Email" class="auth-input" autocomplete="off">
        <input id="auth-password" type="password" placeholder="Password" class="auth-input" autocomplete="off">
        <input id="auth-password-confirm" type="password" placeholder="Confirm Password" class="auth-input" style="display:none" autocomplete="off">
        <button id="auth-submit" class="auth-btn auth-btn-primary">Sign In</button>
        <div id="auth-sso-divider"><span>or continue with</span></div>
        <div id="auth-sso-buttons"></div>
        <button id="auth-form-cancel" class="auth-btn">Cancel</button>
      </div>

      <!-- Separator -->
      <div class="profile-separator"></div>

      <!-- Active profile -->
      <div id="active-profile-section">
        <h4>Active Profile</h4>
        <div id="active-profile-display"></div>
      </div>

      <!-- Profile list -->
      <div id="profile-list-section">
        <h4>Switch Profile</h4>
        <div id="profile-list"></div>
      </div>

      <!-- Create profile -->
      <div id="create-profile-section">
        <button id="btn-create-profile" class="auth-btn auth-btn-primary">New Profile</button>
        <div id="create-profile-form" style="display:none">
          <input id="new-profile-name" type="text" placeholder="Profile name" class="auth-input" autocomplete="off">
          <div id="avatar-picker">
            <button class="avatar-option selected" data-avatar="person">
              <svg width="20" height="20" viewBox="0 0 20 20"><circle cx="10" cy="7" r="3.5" stroke="currentColor" stroke-width="1.3" fill="none"/><path d="M3.5 17.5c0-3.6 2.9-6.5 6.5-6.5s6.5 2.9 6.5 6.5" stroke="currentColor" stroke-width="1.3" fill="none"/></svg>
            </button>
            <button class="avatar-option" data-avatar="star">
              <svg width="20" height="20" viewBox="0 0 20 20"><path d="M10 2l2.5 5 5.5.8-4 3.9 1 5.4L10 14.3 4.9 17.1l1-5.4-4-3.9 5.5-.8z" stroke="currentColor" stroke-width="1.3" fill="none"/></svg>
            </button>
            <button class="avatar-option" data-avatar="heart">
              <svg width="20" height="20" viewBox="0 0 20 20"><path d="M10 17s-7-4.4-7-8.5C3 5.4 5.4 3 8 3c1.5 0 2 .8 2 .8S10.5 3 12 3c2.6 0 5 2.4 5 5.5 0 4.1-7 8.5-7 8.5z" stroke="currentColor" stroke-width="1.3" fill="none"/></svg>
            </button>
            <button class="avatar-option" data-avatar="bolt">
              <svg width="20" height="20" viewBox="0 0 20 20"><path d="M11 2L5 11h5l-1 7 6-9h-5l1-7z" stroke="currentColor" stroke-width="1.3" fill="none"/></svg>
            </button>
          </div>
          <div class="profile-form-actions">
            <button id="create-profile-submit" class="auth-btn auth-btn-primary">Create</button>
            <button id="create-profile-cancel" class="auth-btn">Cancel</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Context menu -->
  <div id="context-menu">
    <button class="menu-item" data-action="back"><span>Back</span><span class="menu-shortcut">Alt+Left</span></button>
    <button class="menu-item" data-action="forward"><span>Forward</span><span class="menu-shortcut">Alt+Right</span></button>
    <button class="menu-item" data-action="reload"><span>Reload</span><span class="menu-shortcut">Ctrl+R</span></button>
    <div class="menu-separator"></div>
    <button class="menu-item" data-action="bookmark"><span>Bookmark this page</span><span class="menu-shortcut">Ctrl+D</span></button>
    <div class="menu-separator"></div>
    <button class="menu-item" data-action="find"><span>Find in page</span><span class="menu-shortcut">Ctrl+F</span></button>
    <button class="menu-item" data-action="devtools"><span>Developer Tools</span><span class="menu-shortcut">F12</span></button>
  </div>

  <div id="panel-overlay"></div>

  <script type="module" src="renderer.js"></script>
</body>
</html>
